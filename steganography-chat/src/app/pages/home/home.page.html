<ion-header>
  <ion-item  lines="none" style="--min-height: 70px;--background:#0d2852;--padding-end:0;--inner-padding-end:8px;" >
    <ion-avatar (click)="profile()" >
      <img  [src]="user.userArray.pp">
    </ion-avatar>
    <ion-icon (click)="profile()" style="color: whitesmoke;font-size: 15px;position: absolute;margin-top:25px;margin-left: 25px;" name="add-circle-sharp"></ion-icon>
    <ion-title style="color: whitesmoke;">Messages</ion-title>
    <ion-fab-button  (click)="presentPopover($event)" style="--padding:0;height: 100%;width: 34px;--box-shadow:0;--border-radius:0;--background:#0d2852;--background-activated:#0d2852;" >
      <ion-icon  style="font-size:28px;color: rgb(223, 221, 221);" name="ellipsis-vertical"></ion-icon>
      </ion-fab-button>
  </ion-item>
  </ion-header>
<ion-content>
  <!-- <ion-refresher slot="fixed" (ionRefresh)="refresh($event)">
    <ion-refresher-content
    pullingIcon="chevron-down-circle-outline"
      refreshingSpinner="crescent">
    </ion-refresher-content>
  </ion-refresher> -->

  <ion-fab >
  <ion-fab-button class="slide-out-right" (click)="contact($event)"  mode="ios" style="position: fixed;bottom:30px;right:15px;width: 45px; height: 45px;--background:#0d2852;--background-activated:#0d2852;--box-shadow: 2px 3px 3px 0 rgba(0, 0, 0, 0.5);">
      <ion-icon style="width: 25px; height: 25px;" name="add"></ion-icon>
    </ion-fab-button>
  </ion-fab>
  
<!-- <ion-fab-button mode="ios" style="position:fixed;z-index:999;bottom:30px;right:15px;--background:#7a86a6">
  <ion-icon name="add"></ion-icon>

</ion-fab-button> -->

<div  class="ion-activatable ripple-parent"  (click)="chat(item.uid,item.email,item.name)"  *ngFor="let item of conversations;let i=index">



<ion-item  style="margin-top: 10px;margin-bottom: 10px;--background:transparent;" >
  <ion-avatar  style="height:60px;width: 60px;"  slot="start">
    <img [src]="item.pp">
  </ion-avatar>
  <ion-label>
    <ion-title style="max-width: 75%;float: left;font-size: 18px;margin-bottom: 5px;padding: 0; "  >{{item.email}}
    </ion-title> 
        <span *ngIf="lastMessageArray[i].data.date.slice(0,10)==date.slice(0,10)" style="position: absolute;right: 20px;font-size: 13px;margin-top: 4px;">
          {{lastMessageArray[i].data.date.slice(11,16)}}</span>
        <span *ngIf="lastMessageArray[i].data.date.slice(0,10)!=date.slice(0,10)" style="position: absolute;right: 13px;font-size: 13px;margin-top: 4px;">
          {{lastMessageArray[i].data.date.slice(8,10)}}-{{lastMessageArray[i].data.date.slice(5,7)}}-{{lastMessageArray[i].data.date.slice(2,4)}}</span>
    <!-- <p style="float: right;font-size: 15px;">test:{{item.date}}</p> -->
    <p style="font-size: 15px;max-width: 85%;clear: both;">
      <span *ngIf="lastMessageArray[i].data.from!=item.uid">
       you:
      </span>
      <span *ngIf="lastMessageArray[i].uid==item.uid && lastMessageArray[i].data.dataType=='text'">
        {{lastMessageArray[i].data.data}}
      </span>
      <span *ngIf="lastMessageArray[i].uid==item.uid && lastMessageArray[i].data.dataType=='img'">
        <ion-icon style="margin-bottom: -2px;" name="image-outline"></ion-icon> image
      </span>
    </p>
<!-- <div  *ngIf="unRead[i].uid==item.uid && unRead[i].counter!=0" style="width: 18px;height: 16px;background-color:#f0eeee;position: absolute;margin-left: 85%;margin-top: -20px;border-radius: 20px;" > 

 <p *ngIf="unRead[i].counter<=9" style="font-size:12px;margin-left:5px;color: #6066af;margin-top: -1px;">{{unRead[i].counter}}</p> 
  <p *ngIf="unRead[i].counter>9 && unRead[i].counter<99" style="font-size:11px;margin-left:2px;color: #6066af;margin-top: -1px;">{{unRead[i].counter}}</p>
  <p *ngIf="unRead[i].counter>=99" style="font-size:11px;margin-left:2px;color: #6066af;margin-top: -1px;">99+</p>

  </div>  -->

  </ion-label>
</ion-item>  
<ion-ripple-effect></ion-ripple-effect>

  </div>

  <div style="margin-top: 30px;" ></div>
  

</ion-content>
